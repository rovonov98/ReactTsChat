(this.webpackJsonpreactts=this.webpackJsonpreactts||[]).push([[0],{44:function(e,t,a){},90:function(e,t,a){},92:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(15),c=a.n(s),i=(a(44),a(12)),l=a(7),o=a(8),d=(a(90),a(1)),u=function(e){var t=Object(r.useState)(""),a=Object(o.a)(t,2),n=a[0],s=a[1],c=e.chatId,i=e.creds,u=function(e){e.preventDefault();var t=n.trim();t.length>0&&Object(l.o)(i,c,{text:t}),s("")};return Object(d.jsxs)("form",{className:"message-form",onSubmit:u,children:[Object(d.jsx)("input",{type:"text",className:"message-input",placeholder:"Write your message here...",value:n,onChange:function(t){s(null===t||void 0===t?void 0:t.target.value),Object(l.l)(e,c)},onSubmit:u}),Object(d.jsx)("label",{htmlFor:"upload-button",children:Object(d.jsx)("span",{className:"image-button",children:"icon"})}),Object(d.jsx)("input",{type:"file",multiple:!1,id:"upload-button",style:{display:"none"},onChange:function(e){Object(l.o)(i,c,{files:e.target.files,text:""})}}),Object(d.jsx)("button",{type:"submit",className:"submit-button",children:" Submit"})]})},m=function(e){var t,a=e.message;return(null===a||void 0===a||null===(t=a.attachments)||void 0===t?void 0:t.length)>0?Object(d.jsx)("img",{src:a.attachments[0].file,alt:"message-attachment",className:"message-image",style:{float:"right",maxWidth:"5rem",maxHeight:"10rem"}}):Object(d.jsx)("div",{className:"message",style:{float:"right",marginRight:"1rem"},children:a.text})},j=function(e){var t,a,r=e.message,n=e.lastMessage,s=!n||n.sender.username!==r.sender.username;return Object(d.jsxs)("div",{className:"message-row",style:{display:"flex"},children:[s&&Object(d.jsx)("div",{className:"messave-avatar",style:{backgroundImage:"url(".concat(null===r||void 0===r||null===(t=r.sender)||void 0===t?void 0:t.avatar,")"),width:"2rem",height:"2rem",backgroundRepeat:"no-repeat",backgroundPosition:"center center",textAlign:"center",backgroundSize:"100%",borderRadius:"50%"}}),(null===r||void 0===r||null===(a=r.attachments)||void 0===a?void 0:a.length)>0?Object(d.jsx)("img",{src:r.attachments[0].file,alt:"message-attachment",className:"message-image",style:{marginLeft:s?".3rem":"3rem",maxWidth:"5rem",maxHeight:"10rem"}}):Object(d.jsx)("div",{className:"message",style:{float:"left",marginLeft:s?".85rem":"3rem"},children:r.text})]})},b=(a(92),function(e){var t=e.chats,a=e.activeChat,n=e.userName,s=e.messages,c=e.creds,l=t&&t[a],o=Object(r.useRef)(null);null!==o.current&&void 0!==o.current&&(o.current.scrollTop=o.current.scrollHeight);var b=function(e,t){return l.people.map((function(a,r){var n;return a.last_read===e.id&&Object(d.jsx)("div",{style:{float:t?"right":"left",backgroundImage:"url(".concat(null===a||void 0===a||null===(n=a.person)||void 0===n?void 0:n.avatar,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center center",textAlign:"center",backgroundSize:"100%",width:".8rem",height:".8rem",borderRadius:"50%"}},"read_".concat(r))}))};return l?Object(d.jsxs)("div",{className:"chat-feed",children:[Object(d.jsxs)("div",{className:"chat-title-container",children:[Object(d.jsx)("div",{className:"chat-title",children:null===l||void 0===l?void 0:l.title}),Object(d.jsx)("div",{className:"chat-subtitle",children:l.people.map((function(e){return"".concat(e.person.username)}))})]}),Object(d.jsx)("div",{className:"messages-wrapper",ref:o,children:function(){var e=Object.keys(s);return e.map((function(t,a){var r=s[t],c=0===a?0:e[a-1],i=n===r.sender.username;return Object(d.jsxs)("div",{style:{width:"100%"},className:"message-wrapper",children:[Object(d.jsx)("div",{className:"message-container",children:i?Object(d.jsx)(m,{message:r}):Object(d.jsx)(j,{message:r,lastMessage:s[c]})}),Object(d.jsxs)("div",{className:"read-receipts",style:{marginRight:i?"1rem":"0px",marginLeft:i?"0px":"3rem"},children:[" ",b(r,i)]})]},"msg_".concat(a))}))}()}),Object(d.jsx)("div",{style:{height:"5rem"}}),Object(d.jsx)("div",{className:"message-form-wrapper",children:Object(d.jsx)(u,Object(i.a)(Object(i.a)({},e),{},{chatId:a,creds:c}))})]}):Object(d.jsx)("div",{children:"Loading..."})}),h=a(22),g=a.n(h),v=a(39),p=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(""),c=Object(o.a)(s,2),i=c[0],l=c[1],u=Object(r.useState)(""),m=Object(o.a)(u,2),j=m[0],b=m[1],h=function(){var e=Object(v.a)(g.a.mark((function e(t){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={"Project-ID":"faefd3ca-b618-4bb4-bea6-67fddd729d63","User-Name":a,"User-Secret":i},e.prev=2,e.next=5,fetch("https://api.chatengine.io/chats",{headers:r});case 5:localStorage.setItem("username",a),localStorage.setItem("password",i),window.location.reload(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),b("Incorrect credentials");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{children:Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Login Form"}),Object(d.jsxs)("form",{onSubmit:h,children:[Object(d.jsx)("input",{value:a,type:"text",onChange:function(e){return n(e.target.value)},placeholder:"username",required:!0}),Object(d.jsx)("input",{value:i,type:"password",onChange:function(e){return l(e.target.value)},placeholder:"password",required:!0}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"Submit"})}),Object(d.jsx)("h3",{children:j})]})]})})},x=function(){return localStorage.getItem("username")?Object(d.jsx)("div",{children:Object(d.jsx)(l.d,{height:"100vh",projectID:"faefd3ca-b618-4bb4-bea6-67fddd729d63",userName:localStorage.getItem("username"),userSecret:localStorage.getItem("password"),renderChatFeed:function(e){return Object(d.jsx)(b,Object(i.a)({},e))}})}):Object(d.jsx)(p,{})},f=function(){return Object(d.jsx)("div",{children:Object(d.jsx)(x,{})})},O=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,97)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),s(e),c(e)}))};c.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(f,{})}),document.getElementById("root")),O()}},[[94,1,2]]]);
//# sourceMappingURL=main.9cc30bd8.chunk.js.map