(this.webpackJsonpreactts=this.webpackJsonpreactts||[]).push([[0],{37:function(e,t,a){},45:function(e,t,a){},91:function(e,t,a){},93:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),n=a(15),c=a.n(n),i=(a(45),a(12)),l=a(7),o=a(8),d=(a(91),a.p+"static/media/upload.7f7867d2.svg"),u=a(1),m=function(e){var t=Object(s.useState)(""),a=Object(o.a)(t,2),r=a[0],n=a[1],c=e.chatId,i=e.creds,m=function(e){e.preventDefault();var t=r.trim();t.length>0&&Object(l.o)(i,c,{text:t}),n("")};return Object(u.jsxs)("form",{className:"message-form",onSubmit:m,children:[Object(u.jsx)("input",{type:"text",className:"message-input",placeholder:"Write your message here...",value:r,onChange:function(t){n(null===t||void 0===t?void 0:t.target.value),Object(l.l)(e,c)},onSubmit:m}),Object(u.jsx)("label",{htmlFor:"upload-button",children:Object(u.jsx)("span",{className:"image-button",children:Object(u.jsx)("img",{className:"svg-image",src:d,alt:"w"})})}),Object(u.jsx)("input",{type:"file",multiple:!1,id:"upload-button",style:{display:"none"},onChange:function(e){Object(l.o)(i,c,{files:e.target.files,text:""})}}),Object(u.jsx)("button",{type:"submit",className:"submit-button",children:" Submit"})]})},j=(a(37),function(e){var t,a=e.message;return(null===a||void 0===a||null===(t=a.attachments)||void 0===t?void 0:t.length)>0?Object(u.jsx)("img",{src:a.attachments[0].file,alt:"message-attachment",className:"message-image",style:{float:"right",maxWidth:"5rem",maxHeight:"10rem"}}):Object(u.jsx)("div",{className:"message",style:{float:"right",marginRight:"1rem"},children:a.text})}),b=function(e){var t,a,s=e.message,r=e.lastMessage,n=!r||r.sender.username!==s.sender.username;return Object(u.jsxs)("div",{className:"message-row",style:{display:"flex"},children:[n&&Object(u.jsx)("div",{className:"messave-avatar",style:{backgroundImage:"url(".concat(null===s||void 0===s||null===(t=s.sender)||void 0===t?void 0:t.avatar,")"),width:"2rem",height:"2rem",backgroundRepeat:"no-repeat",backgroundPosition:"center center",textAlign:"center",backgroundSize:"100%",borderRadius:"50%"}}),(null===s||void 0===s||null===(a=s.attachments)||void 0===a?void 0:a.length)>0?Object(u.jsx)("img",{src:s.attachments[0].file,alt:"message-attachment",className:"message-image",style:{marginLeft:n?".3rem":"3rem",maxWidth:"5rem",maxHeight:"10rem"}}):Object(u.jsx)("div",{className:"message",style:{float:"left",marginLeft:n?".85rem":"3rem"},children:s.text})]})},h=(a(93),function(e){var t=e.chats,a=e.activeChat,r=e.userName,n=e.messages,c=e.creds,l=t&&t[a],o=Object(s.useRef)(null);null!==o.current&&void 0!==o.current&&(o.current.scrollTop=o.current.scrollHeight);var d=function(e,t){return l.people.map((function(a,s){var r;return a.last_read===e.id&&Object(u.jsx)("div",{style:{float:t?"right":"left",backgroundImage:"url(".concat(null===a||void 0===a||null===(r=a.person)||void 0===r?void 0:r.avatar,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center center",textAlign:"center",backgroundSize:"100%",width:".8rem",height:".8rem",borderRadius:"50%"}},"read_".concat(s))}))};return l?Object(u.jsxs)("div",{className:"chat-feed",children:[Object(u.jsxs)("div",{className:"chat-title-container",children:[Object(u.jsx)("div",{className:"chat-title",children:null===l||void 0===l?void 0:l.title}),Object(u.jsx)("div",{className:"chat-subtitle",children:l.people.map((function(e){return"".concat(e.person.username)}))})]}),Object(u.jsx)("div",{className:"messages-wrapper",ref:o,children:function(){var e=Object.keys(n);return e.map((function(t,a){var s=n[t],c=0===a?0:e[a-1],i=r===s.sender.username;return Object(u.jsxs)("div",{style:{width:"100%"},className:"message-wrapper",children:[Object(u.jsx)("div",{className:"message-container",children:i?Object(u.jsx)(j,{message:s}):Object(u.jsx)(b,{message:s,lastMessage:n[c]})}),Object(u.jsx)("div",{className:"read-receipts",style:{marginRight:i?"1rem":"0px",marginLeft:i?"0px":"3rem"},children:d(s,i)})]},"msg_".concat(a))}))}()}),Object(u.jsx)("div",{className:"message-form-wrapper",children:Object(u.jsx)(m,Object(i.a)(Object(i.a)({},e),{},{chatId:a,creds:c}))})]}):Object(u.jsx)("div",{children:"Loading..."})}),g=a(22),v=a.n(g),p=a(40),f=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],n=Object(s.useState)(""),c=Object(o.a)(n,2),i=c[0],l=c[1],d=Object(s.useState)(""),m=Object(o.a)(d,2),j=m[0],b=m[1],h=function(){var e=Object(p.a)(v.a.mark((function e(t){var s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s={"Project-ID":"faefd3ca-b618-4bb4-bea6-67fddd729d63","User-Name":a,"User-Secret":i},e.prev=2,e.next=5,fetch("https://api.chatengine.io/chats",{headers:s});case 5:localStorage.setItem("username",a),localStorage.setItem("password",i),window.location.reload(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),b("Incorrect credentials");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{children:Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Login Form"}),Object(u.jsxs)("form",{onSubmit:h,children:[Object(u.jsx)("input",{value:a,type:"text",onChange:function(e){return r(e.target.value)},placeholder:"username",required:!0}),Object(u.jsx)("input",{value:i,type:"password",onChange:function(e){return l(e.target.value)},placeholder:"password",required:!0}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"Submit"})}),Object(u.jsx)("h3",{children:j})]})]})})},x=function(){return localStorage.getItem("username")?Object(u.jsx)("div",{children:Object(u.jsx)(l.d,{height:"100vh",projectID:"faefd3ca-b618-4bb4-bea6-67fddd729d63",userName:localStorage.getItem("username"),userSecret:localStorage.getItem("password"),renderChatFeed:function(e){return Object(u.jsx)(h,Object(i.a)({},e))}})}):Object(u.jsx)(f,{})},O=function(){return Object(u.jsx)("div",{children:Object(u.jsx)(x,{})})},N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,98)).then((function(t){var a=t.getCLS,s=t.getFID,r=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),s(e),r(e),n(e),c(e)}))};c.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(O,{})}),document.getElementById("root")),N()}},[[95,1,2]]]);
//# sourceMappingURL=main.f47e70c3.chunk.js.map